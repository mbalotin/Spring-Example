<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                template="/pages/template/template.xhtml" >

  <ui:define name="Content">

    <ui:param name="bean" value="#{ScriptMbean}" />

    <p:fieldset legend="List of Scripts" >
      <h:form id="panelView" prependId="false">

        <p:dataTable widgetVar="scryptTable" var="sistema"
                     value="#{bean.sistemas}" filterEvent="enter"
                     selection="#{bean.selectedSistema}" paginatorAlwaysVisible="false"
                     emptyMessage="No Registries" paginator="true" rows="10"
                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                     rowsPerPageTemplate="10,25,50,100"
                     currentPageReportTemplate="(Displaying {startRecord} - {endRecord} of {totalRecords}, Page: {currentPage}/{totalPages})">

          <p:column headerText="ID" sortBy="#{sistema.id}" filterBy="#{sistema.id}" filterMatchMode="contains">
            <h:outputText value="#{sistema.id}" />
          </p:column>

          <p:column headerText="Nome" sortBy="#{sistema.nome.toLowerCase()}" filterBy="#{sistema.nome}" filterMatchMode="contains">
            <h:outputText value="#{sistema.nome}" />
          </p:column>

          <p:column headerText="Sigla" sortBy="#{sistema.sigla.toLowerCase()}" filterBy="#{sistema.sigla}" filterMatchMode="contains" >
            <h:outputText value="#{sistema.sigla}" />
          </p:column>

          <p:column headerText="Descricao" sortBy="#{sistema.descricao.toLowerCase()}" filterBy="#{sistema.descricao}" filterMatchMode="contains">
            <h:outputText value="#{sistema.descricao}" />
          </p:column>

          <p:column headerText="Linguagem" sortBy="#{sistema.linguagem.toLowerCase()}" filterBy="#{sistema.linguagem}" filterMatchMode="contains" >
            <h:outputText value="#{sistema.linguagem}" />
          </p:column>

          <p:column headerText="Actions" style="text-align: center" >
            <p:commandButton icon="ui-icon-pencil" action="#{bean.edit()}" update=":pageCentral" global="false">
              <f:setPropertyActionListener value="#{sistema}" target="#{bean.selectedSistema}" />
            </p:commandButton>

            <p:commandButton icon="ui-icon-trash" onsuccess="deleteConfirm.show()" global="false">
              <f:setPropertyActionListener value="#{sistema}" target="#{bean.selectedSistema}" />
            </p:commandButton>
          </p:column>

          <f:facet name="footer">
            <p:commandButton value="New" action="#{bean.newScript()}" icon="ui-icon-document" global="false" process="@this" />

            <p:commandButton value="Cancel" action="pretty:scripts" icon="ui-icon-check" global="false" process="@this" />
          </f:facet>
        </p:dataTable>

      </h:form>
    </p:fieldset>

    <p:confirmDialog id="deleteConfirmId" message="Are you sure you want to remove this?"
                     header="Confirmation" widgetVar="deleteConfirm" appendTo="@(body)" severity="alert">
      <h:form>
        <p:commandButton value="No" onsuccess="deleteConfirm.hide()" icon="ui-icon-cancel"
                         style="float: right;" global="false"/>

        <p:commandButton value="Yes" onsuccess="deleteConfirm.hide()" update=":panelView"
                         action="#{bean.delete}" icon="ui-icon-check" style="float: right;" />
      </h:form>
    </p:confirmDialog>

  </ui:define>
</ui:composition>